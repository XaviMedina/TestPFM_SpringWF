<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
   xmlns:ui="http://java.sun.com/jsf/facelets"
   xmlns:h="http://java.sun.com/jsf/html"
   xmlns:f="http://java.sun.com/jsf/core"
   xmlns:p="http://primefaces.org/ui"
   xmlns:pm="http://primefaces.org/mobile">
 	<h:head>
 	<script src="http://maps.google.com/maps/api/js?sensor=true" type="text/javascript"></script>
 	</h:head>
    <h:body>
   		<pm:page id="main">
   			<pm:header title="Shop List">
	   			<f:facet name="right">
	   				<p:commandButton id="btn-menu" icon="ui-icon-grid" type="button" />
	   			</f:facet>
   			</pm:header>
   			<pm:content id="content">
   				<h:form id="form">
   					<p:dataList id="shopsList" value="#{shopBean.fetchedShops}" var="shop">
	    				<p:accordionPanel activeIndex="0">
	    					<p:tab title="#{shop.id}: #{shop.company}">
	    						<b>Address: </b><h:outputText value="#{shop.address} #{shop.addressNumber}, #{shop.postalCode}, #{shop.city}" />
	    						<p:gmap id="gmap" center="#{shop.latitude},#{shop.longitude}" zoom="13" type="HYBRID" style="width:100%;height:400px"
    								widgetVar="map" />
	    					</p:tab>
	    				</p:accordionPanel>
	    			</p:dataList>
	    		</h:form>
   			</pm:content>

   			<p:overlayPanel for="btn-menu" widgetVar="pnl" at="right" showEffect="overlay" dynamic="true" styleClass="ui-listview-inset ui-corner-all ui-group-theme-b">
		    	<ui:include src="/menu/lateral_menu_overlay.xhtml"/>
			</p:overlayPanel>
   		</pm:page>
    </h:body>
</html>